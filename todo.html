<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
  $(document).ready(populate);

  function populate() {
      update_list();
  }

  function update_list() {
    var table = document.getElementById('table1');
    $.getJSON("api/tasks?mode=select", function(data){
      $.each( data, function( key, val ) {
        var table_row = document.createElement('tr');

        var table_div1 = document.createElement('td');
        table_div1.appendChild(document.createTextNode(val['task']));
        table_row.appendChild(table_div1);

        var table_div2 = document.createElement('td');
        var finishButton = document.createElement('button');
        finishButton.onclick = function (){
          finishTask(val['id']);  
        };
        finishButton.appendChild(document.createTextNode('Finish'));
        table_div2.appendChild(finishButton);
        table_row.appendChild(table_div2);

        table.appendChild(table_row);
      });
    });
  }

  function finishTask(taskID) {
    $.get( 'api/tasks?mode=delete&id=' + taskID );
  }

  </script>
</head>
<body>
  <h1> Get Ready to WORK! </h1>
  <p> Here are the things you need to do: </p>
  <table id="table1">
    <tr>
        <td>Test1</td> <td>Placeholder</td>
    </tr>
  </table>
</body>
</html>
